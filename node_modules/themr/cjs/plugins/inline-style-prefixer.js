/**
 * @license
 * Copyright (C) 2016 Chi Vinh Le and contributors.
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file for details.
 */
"use strict";
var createHash = require("murmurhash-js/murmurhash3_gc");
var Prefixer = require("inline-style-prefixer");
var ns = "inline-style-prefixer";
var defaults = function () { return ({
    prefixer: new Prefixer(),
}); };
var plugin = function (pluginOptions) {
    if (pluginOptions === void 0) { pluginOptions = defaults(); }
    return function (_a) {
        var styles = _a.rules.styles, runtime = _a.runtime;
        if (!runtime[ns]) {
            runtime[ns] = { cache: {} };
        }
        if (!styles) {
            return;
        }
        var pfxRuntime = runtime[ns];
        var prefixer = pluginOptions.prefixer;
        for (var name_1 in styles) {
            var hash = createHash(JSON.stringify(styles[name_1]));
            var prefixed = pfxRuntime.cache[hash];
            if (!prefixed) {
                prefixed = prefixer.prefix(styles[name_1]);
                pfxRuntime.cache[hash] = prefixed;
            }
            styles[name_1] = prefixed;
        }
    };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = plugin;

//# sourceMappingURL=inline-style-prefixer.js.map
