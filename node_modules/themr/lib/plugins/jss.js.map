{"version":3,"sources":["plugins/jss.ts"],"names":[],"mappings":"AAAA;;;;;;GAMG;AAEH,OAAO,KAAK,UAAU,MAAM,8BAA8B,CAAC;AAC3D,OAAO,EAAE,OAAO,IAAI,UAAU,EAAsC,MAAM,KAAK,CAAC;AAIhF,IAAM,EAAE,GAAG,KAAK,CAAC;AAUjB,IAAM,QAAQ,GAAwB,cAAM,OAAA,CAAC;IAC3C,GAAG,EAAE,UAAU;CAChB,CAAC,EAF0C,CAE1C,CAAC;AAEH,IAAM,MAAM,GAAiC,UAAC,aAA0B;IAA1B,8BAAA,EAAA,gBAAgB,QAAQ,EAAE;IACtE,OAAA,UAAC,EAAyB;YAAxB,gBAAK,EAAE,oBAAO,EAAE,oBAAO;QACvB,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;YAAC,MAAM,CAAC;QAAC,CAAC;QAC/B,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YAAC,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,EAAE,EAAa,CAAC;QAAC,CAAC;QAC7D,IAAM,UAAU,GAAY,OAAO,CAAC,EAAE,CAAC,CAAC;QACjC,IAAA,uBAAG,CAAkB;QAC5B,IAAM,UAAU,GAAG;YACjB,IAAI,EAAE,OAAO,CAAC,IAAI;YAClB,KAAK,EAAE,OAAO,CAAC,KAAK;YACpB,KAAK,EAAE,CAAC,OAAO,CAAC,MAAM;SACvB,CAAC;QAEF,IAAM,IAAI,GAAG,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;QACvD,IAAI,UAAU,GAAG,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACxC,EAAE,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;YAChB,IAAM,KAAK,GAAG,GAAG,CAAC,gBAAgB,CAAC,KAAK,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;YAC9D,KAAK,CAAC,MAAM,EAAE,CAAC;YACf,UAAU,GAAG,KAAK,CAAC,OAAO,CAAC;YAC3B,UAAU,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC;QACtC,CAAC;QACD,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC;IAC7B,CAAC;AApBD,CAoBC,CAAC;AAEJ,eAAe,MAAM,CAAC","file":"jss.js","sourcesContent":["/**\n * @license\n * Copyright (C) 2016 Chi Vinh Le and contributors.\n *\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n\nimport * as createHash from \"murmurhash-js/murmurhash3_gc\";\nimport { default as defaultJSS, JSS, StyleSheet, StyleSheetOptions } from \"jss\";\n\nimport { PluginFactory, Task } from \"../plugin\";\n\nconst ns = \"jss\";\n\ntype Runtime = {\n  cache: { [hash: number]: any };\n};\n\nexport type PluginOptions = {\n  jss?: JSS,\n};\n\nconst defaults: () => PluginOptions = () => ({\n  jss: defaultJSS,\n});\n\nconst plugin: PluginFactory<PluginOptions> = (pluginOptions = defaults()) =>\n  ({rules, options, runtime}) => {\n    if (!rules.classes) { return; }\n    if (!runtime[ns]) { runtime[ns] = { cache: {} } as Runtime; }\n    const jssRuntime: Runtime = runtime[ns];\n    const {jss} = pluginOptions;\n    const jssOptions = {\n      meta: options.name,\n      index: options.index,\n      named: !options.global,\n    };\n\n    const hash = createHash(JSON.stringify(rules.classes));\n    let classNames = jssRuntime.cache[hash];\n    if (!classNames) {\n      const sheet = jss.createStyleSheet(rules.classes, jssOptions);\n      sheet.attach();\n      classNames = sheet.classes;\n      jssRuntime.cache[hash] = classNames;\n    }\n    rules.classes = classNames;\n  };\n\nexport default plugin;\n"]}